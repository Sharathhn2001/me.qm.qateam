<mvc:View
    controllerName="com.monsterenergy.qm.me.qm.qateam.controller.HomePage"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    xmlns:fb="sap.ui.comp.filterbar"
>
    <f:DynamicPage
        id="dynamicPage"
        headerExpanded="true"
    >
        <f:header>
            <f:DynamicPageHeader id="dynamicPageHeader">
                <f:content>
                    <fb:FilterBar
                        id="filterbar"
                        persistencyKey="myPersKey"
                        useToolbar="false"
                        search=".onSearch"
                        reset=".onResetPress"
                        filterChange=".onFilterChange"
                        advancedMode="false"
                    >
                        <fb:filterGroupItems>
                            <fb:FilterGroupItem
                                id="plantFilterGroupItemMultiPlant"
                                name="Werk"
                                label="{i18n>plant}"
                                groupName="Group2"
                                mandatory="true"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiInput
                                        id="plantMIput"
                                        editable="true"
                                        showValueHelp="true"
                                        showSuggestion="true"
                                        valueHelpRequest="onOpenDialogPlantValueHelpF4"
                                        tokenUpdate=".onPlantTokenChange"
                                    />
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                id="plantFilterGroupItemplantname"
                                name="Werk"
                                label="{i18n>plant}"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <Input
                                        id="plantName"
                                        editable="false"
                                        value="{ViewModel>/Plant}"
                                    />
                                    <!-- <MultiInput id="plantMIput" editable="false"
                                        showValueHelp="true"
                                        showSuggestion="true"
                                        valueHelpRequest=".onPlantValueHelpRequested"
                                        tokenUpdate=".onFilterGroupItemChange" /> -->
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                id="imaterialFilterGroupItem"
                                name="Matnr"
                                label="{i18n>material}"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiInput
                                        id="materialMInput"
                                        showValueHelp="true"
                                        showSuggestion="true"
                                        valueHelpRequest=".onMaterialValueHelpRequested"
                                        tokenUpdate=".onMaterialTokenChange"
                                        suggestionItems="{
				                            path: 'MaterialF4Model>/results',
				                            sorter: { path: 'Matnr' }
			                            }"
                                    >
                                        <core:ListItem
                                            key="{MaterialF4Model>Matnr}"
                                            text="{MaterialF4Model>Matnr}"
                                            additionalText="{MaterialF4Model>Maktx}"
                                        />
                                    </MultiInput>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                id="batchFilterGroupItem"
                                name="Charg"
                                label="{i18n>batch}"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiInput
                                        id="batchMInput"
                                        editable="true"
                                        showValueHelp="true"
                                        showSuggestion="true"
                                        valueHelpRequest=".onBatchValueHelpRequested"
                                        tokenUpdate=".onBatchTokenChange"
                                        suggestionItems="{
				                            path: 'BatchF4Model>/results',
				                            sorter: { path: 'Charg' }
			                            }"
                                    >
                                        <core:ListItem
                                            key="{BatchF4Model>Charg}"
                                            text="{BatchF4Model>Charg}"
                                        />
                                    </MultiInput>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                id="formulaFilterGroupItem"
                                name="Zzhbcformula"
                                visible="true"
                                label="{i18n>formula}"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <MultiInput
                                        id="formulaMInput"
                                        editable="true"
                                        showValueHelp="true"
                                        showSuggestion="true"
                                        valueHelpRequest=".onFormulaValueHelpRequested"
                                        tokenUpdate=".onFormulaTokenChange"
                                        suggestionItems="{
				                            path: 'FormulaF4Model>/results',
				                            sorter: { path: 'Zzhbcformula' }
			                            }"
                                    >
                                        <core:ListItem
                                            key="{FormulaF4Model>Zzhbcformula}"
                                            text="{FormulaF4Model>Zzhbcformula}"
                                        />
                                    </MultiInput>
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                id="dateFilterGroupItem"
                                name="CreateDt"
                                label="{i18n>date}"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <DateRangeSelection
                                        id="dateRangeSelection"
                                        change=".onFilterGroupItemChange"
                                        displayFormat="MM/dd/YYYY"
                                    />
                                </fb:control>
                            </fb:FilterGroupItem>
                            <fb:FilterGroupItem
                                id="statusFilterGroupItem"
                                name="Status"
                                visible="false"
                                label="{i18n>status}"
                                groupName="Group1"
                                visibleInFilterBar="true"
                            >
                                <fb:control>
                                    <ComboBox
                                        id="statusCombo"
                                        items="{path:'/UserStatusF4Set'}"
                                        change=".onFilterGroupItemChange"
                                    >
                                        <core:ListItem
                                            key="{Status}"
                                            text="{Statusdesc}"
                                        />
                                    </ComboBox>
                                </fb:control>
                            </fb:FilterGroupItem>
                        </fb:filterGroupItems>
                    </fb:FilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <Table
                id="table"
                mode="MultiSelect"
                noDataText="{ViewModel>/tableNoDataText}"
                inset="false"
                popinLayout="GridLarge"
                busyIndicatorDelay="{ViewModel>/tableBusyDelay}"
                growing="true"
                itemPress=".onItemPress"
                growingScrollToLoad="false"
                growingThreshold="10"
                sticky="HeaderToolbar,InfoToolbar,ColumnHeaders"
                fixedLayout="true"
            >
                <headerToolbar>
                    <OverflowToolbar id="tableOverflowToolbar">
                        <Title
                            id="tableHeader"
                            text="{i18n>tablehdr}"
                            level="H3"
                        />
                        <ToolbarSpacer id="tableToolbarSpacer" />
                        <Button
                            id="exportToExcelButton"
                            text="Download Report"
                            visible="true"
                            press=".onExportToExcelPress"
                            type="Emphasized"
                            icon="sap-icon://excel-attachment"
                        />
                        <Button
                            id="createButton"
                            text="{i18n>submitnew}"
                            visible="true"
                            press=".onSubmitNewPress"
                            type="Emphasized"
                        />
                    </OverflowToolbar>
                </headerToolbar>
                <columns>
                    <Column
                        id="dateColumn"
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        popinDisplay="Inline"
                        hAlign="Begin"
                    >
                        <Label
                            id="dateColumnLabel"
                            text="{i18n>date}"
                            wrapping="true"
                        />
                    </Column>
                    <Column
                        id="materialColumn"
                        width="40%"
                        hAlign="Begin"
                    >
                        <Label
                            id="materialColumnLabel"
                            text="{i18n>material}"
                        />
                    </Column>
                    <Column
                        id="batchColumn"
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        popinDisplay="Inline"
                        hAlign="Begin"
                    >
                        <Label
                            id="batchColumnLabel"
                            text="{i18n>batch}"
                        />
                    </Column>
                    <Column
                        id="formulaColumn"
                        hAlign="Begin"
                        minScreenWidth="Tablet"
                        demandPopin="true"
                        popinDisplay="Inline"
                    >
                        <Label
                            id="formulaColumnLabel"
                            text="{i18n>formula}"
                        />
                    </Column>
                    <Column
                        id="userstatusColumn"
                        hAlign="Begin"
                        visible="true"
                    >
                        <Label
                            id="userstatusColumnLabel"
                            text="{i18n>status}"
                        />
                    </Column>
                </columns>
                <items>
                    <ColumnListItem
                        id="clmlistitem"
                        visible="false"
                        type="Navigation"
                    >
                        <cells>
                            <Text
                                text="{path:'CreateDt', formatter:'.formatter.dateFormatter'}"
                            />
                            <Text text="{Matnr} - {Maktx}" />
                            <Text text="{Charg}" />
                            <Text text="{Zzhbcformula}" />
                            <Text text="{Statusdesc}" />
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </f:content>
    </f:DynamicPage>
</mvc:View>
